# Pull Request 생성 규칙

<!--
  Git Flow 기반 Pull Request 생성 및 작성 규칙
  이 파일은 PR 생성 시 Cursor AI가 따라야 할 규칙을 정의합니다
-->

## 📋 메타데이터

- 버전: 1.0.0
- 마지막 업데이트: 2024
- 목적: Git Flow 기반의 일관된 PR 생성 및 작성 가이드라인 제공
- 브랜치 전략: Git Flow

<!-- ============================================ -->
<!-- Git Flow 브랜치 전략 -->
<!-- ============================================ -->

## 🌿 Git Flow 브랜치 전략

### 브랜치 구조

Git Flow는 다음과 같은 브랜치 구조를 사용합니다:

```
main (또는 master)
├── develop
│   ├── feature/기능명
│   ├── bugfix/버그명
│   └── hotfix/긴급수정명
└── release/버전명
```

### 브랜치 설명

#### 1. **main (master)**

- **목적**: 프로덕션 배포 가능한 안정적인 코드
- **보호 규칙**: 직접 커밋 불가, PR을 통해서만 병합
- **병합 소스**: `release/*`, `hotfix/*` 브랜치에서만 병합

#### 2. **develop**

- **목적**: 다음 릴리스를 위한 개발 통합 브랜치
- **보호 규칙**: 직접 커밋 가능하지만 PR 권장
- **병합 소스**: `feature/*`, `bugfix/*` 브랜치에서 병합

#### 3. **feature/기능명**

- **목적**: 새로운 기능 개발
- **생성 기준**: `develop` 브랜치에서 분기
- **병합 대상**: `develop` 브랜치로 병합
- **삭제**: 병합 후 삭제

#### 4. **bugfix/버그명**

- **목적**: develop 브랜치의 버그 수정
- **생성 기준**: `develop` 브랜치에서 분기
- **병합 대상**: `develop` 브랜치로 병합
- **삭제**: 병합 후 삭제

#### 5. **release/버전명**

- **목적**: 릴리스 준비 및 버그 수정
- **생성 기준**: `develop` 브랜치에서 분기
- **병합 대상**: `main`과 `develop` 양쪽으로 병합
- **삭제**: 병합 후 삭제

#### 6. **hotfix/긴급수정명**

- **목적**: 프로덕션 긴급 수정
- **생성 기준**: `main` 브랜치에서 분기
- **병합 대상**: `main`과 `develop` 양쪽으로 병합
- **삭제**: 병합 후 삭제

<!-- ============================================ -->
<!-- 브랜치 네이밍 규칙 -->
<!-- ============================================ -->

## 📝 브랜치 네이밍 규칙

### 기본 형식

```
{타입}/{간단한-설명}
```

### 타입별 예시

#### Feature 브랜치

```
feature/user-authentication
feature/payment-integration
feature/dashboard-ui
```

#### Bugfix 브랜치

```
bugfix/login-error-handling
bugfix/memory-leak-fix
bugfix/api-timeout-issue
```

#### Hotfix 브랜치

```
hotfix/security-patch
hotfix/critical-bug-fix
hotfix/urgent-api-fix
```

#### Release 브랜치

```
release/v1.2.0
release/v2.0.0-beta
release/v1.1.5
```

### 네이밍 가이드라인

- **소문자 사용**: 브랜치명은 소문자로 작성
- **하이픈 구분**: 단어는 하이픈(`-`)으로 구분
- **명확한 설명**: 브랜치명만 봐도 목적을 알 수 있도록 작성
- **이슈 번호 포함** (선택): `feature/123-user-login` 형식으로 이슈 번호 포함 가능
- **길이 제한**: 너무 긴 이름은 피하고 핵심만 표현

<!-- ============================================ -->
<!-- PR 생성 전 체크리스트 -->
<!-- ============================================ -->

## ✅ PR 생성 전 체크리스트

PR을 생성하기 전에 다음 사항을 확인합니다:

### 코드 품질

- [ ] 코드가 프로젝트의 코딩 스타일을 따릅니다
- [ ] 불필요한 주석이나 디버그 코드가 제거되었습니다
- [ ] 타입 에러나 린터 에러가 없습니다
- [ ] 코드 리뷰를 받을 준비가 되었습니다

### 테스트

- [ ] 관련 테스트가 작성되었습니다 (필요한 경우)
- [ ] 기존 테스트가 모두 통과합니다
- [ ] 새로운 기능이 정상적으로 동작합니다

### 문서화

- [ ] README나 관련 문서가 업데이트되었습니다 (필요한 경우)
- [ ] 복잡한 로직에 주석이 추가되었습니다
- [ ] API 변경사항이 문서화되었습니다 (필요한 경우)

### Git 관리

- [ ] 커밋 메시지가 명확하고 의미있게 작성되었습니다
- [ ] 관련 없는 변경사항이 포함되지 않았습니다
- [ ] 브랜치가 최신 `develop` 브랜치와 동기화되었습니다

### 기타

- [ ] PR 설명이 명확하게 작성되었습니다
- [ ] 관련 이슈가 연결되었습니다 (있는 경우)
- [ ] 리뷰어가 지정되었습니다

<!-- ============================================ -->
<!-- PR 제목 작성 규칙 -->
<!-- ============================================ -->

## 📌 PR 제목 작성 규칙

### 기본 형식

```
[타입] 간단한 설명
```

### 타입별 예시

#### Feature

```
[Feature] 사용자 인증 기능 추가
[Feature] 결제 시스템 통합
[Feature] 대시보드 UI 구현
```

#### Bugfix

```
[Bugfix] 로그인 에러 처리 개선
[Bugfix] 메모리 누수 수정
[Bugfix] API 타임아웃 이슈 해결
```

#### Hotfix

```
[Hotfix] 보안 취약점 패치
[Hotfix] 긴급 버그 수정
[Hotfix] API 응답 오류 수정
```

#### Refactor

```
[Refactor] 사용자 서비스 로직 리팩토링
[Refactor] 컴포넌트 구조 개선
[Refactor] API 클라이언트 모듈화
```

#### Docs

```
[Docs] API 문서 업데이트
[Docs] README 설치 가이드 추가
[Docs] 코딩 컨벤션 문서화
```

#### Style

```
[Style] 코드 포맷팅 수정
[Style] ESLint 규칙 적용
[Style] 불필요한 공백 제거
```

#### Test

```
[Test] 사용자 인증 테스트 추가
[Test] 통합 테스트 작성
[Test] E2E 테스트 시나리오 추가
```

#### Chore

```
[Chore] 의존성 업데이트
[Chore] 빌드 스크립트 수정
[Chore] CI/CD 설정 변경
```

### 제목 작성 가이드라인

- **명확성**: PR 제목만 봐도 무엇을 변경했는지 알 수 있어야 합니다
- **간결성**: 50자 이내로 작성하는 것을 권장합니다
- **동사 사용**: "추가", "수정", "개선" 등 동사를 사용합니다
- **이슈 번호**: 관련 이슈가 있으면 제목 끝에 `(#123)` 형식으로 추가합니다
  - 예: `[Feature] 사용자 인증 기능 추가 (#123)`

<!-- ============================================ -->
<!-- PR 본문 템플릿 -->
<!-- ============================================ -->

## 📄 PR 본문 템플릿

PR 본문은 다음 구조를 따릅니다:

```markdown
## 📋 변경 사항

### 주요 변경

- 변경 사항 1
- 변경 사항 2

### 상세 내용

#### 1. 변경 항목 1

- **파일**: `경로/파일명`
- **내용**:
  - 변경 내용 설명
  - 변경 이유

#### 2. 변경 항목 2

- **파일**: `경로/파일명`
- **내용**:
  - 변경 내용 설명
  - 변경 이유

## 🎯 목적

이 PR이 해결하려는 문제나 목표를 명확히 설명합니다.

## 🔍 변경 사항 상세

### 추가된 기능

- 기능 1
- 기능 2

### 수정된 내용

- 수정 1
- 수정 2

### 삭제된 내용

- 삭제 1 (삭제 이유)

## 📝 참고

- 관련 문서 링크
- 참고한 이슈나 토론
- 추가로 확인할 사항

## ✅ 체크리스트

- [ ] 코드 리뷰를 받았습니다
- [ ] 테스트가 통과합니다
- [ ] 문서가 업데이트되었습니다 (필요한 경우)
- [ ] 브레이킹 체인지가 없습니다 (또는 문서화되었습니다)

## 🖼️ 스크린샷 (UI 변경인 경우)

<!-- UI 변경이 있는 경우 스크린샷을 첨부합니다 -->

## 🧪 테스트 방법

1. 테스트 단계 1
2. 테스트 단계 2
3. 예상 결과

## 🔗 관련 이슈

- Closes #123
- Related to #456
```

### 템플릿 사용 가이드

- **필수 섹션**: 변경 사항, 목적, 체크리스트는 필수로 포함합니다
- **선택 섹션**: 스크린샷, 테스트 방법, 관련 이슈는 필요에 따라 포함합니다
- **명확한 설명**: 리뷰어가 이해하기 쉽도록 구체적으로 작성합니다
- **코드 참조**: 중요한 변경사항은 코드 블록으로 예시를 제공합니다

<!-- ============================================ -->
<!-- 커밋 메시지 규칙 -->
<!-- ============================================ -->

## 💬 커밋 메시지 규칙

### 기본 형식 (Conventional Commits)

```
<타입>(<범위>): <제목>

<본문>

<푸터>
```

### 타입 (Type)

- **feat**: 새로운 기능 추가
- **fix**: 버그 수정
- **docs**: 문서 수정
- **style**: 코드 포맷팅, 세미콜론 누락 등 (코드 변경 없음)
- **refactor**: 코드 리팩토링
- **test**: 테스트 코드 추가 또는 수정
- **chore**: 빌드 업무 수정, 패키지 매니저 설정 등
- **perf**: 성능 개선
- **ci**: CI 설정 변경

### 예시

#### 간단한 커밋

```
feat: 사용자 로그인 기능 추가
```

#### 범위 포함

```
feat(auth): JWT 토큰 인증 구현
```

#### 본문 포함

```
feat: 사용자 프로필 페이지 추가

- 프로필 이미지 업로드 기능
- 사용자 정보 수정 기능
- 비밀번호 변경 기능

Closes #123
```

#### 여러 변경사항

```
feat: 결제 시스템 통합

- 결제 API 연동
- 결제 내역 조회 기능
- 결제 실패 처리 로직

BREAKING CHANGE: 결제 관련 API 엔드포인트 변경
```

### 커밋 메시지 가이드라인

- **제목**: 50자 이내, 명확하고 간결하게
- **본문**: 72자마다 줄바꿈, "무엇을"과 "왜"를 설명
- **푸터**: 이슈 번호, BREAKING CHANGE 등
- **과거형 금지**: "추가했습니다" ❌ → "추가" ✅
- **한 줄로 끝낼 수 있으면 한 줄로**: 간단한 변경은 본문 생략 가능

### 커밋 메시지 템플릿 사용

프로젝트에 `.gitmessage` 파일이 포함되어 있습니다. Git 설정에 연결하여 사용할 수 있습니다:

#### 프로젝트별 설정

```bash
git config commit.template .gitmessage
```

#### 전역 설정

```bash
cp .gitmessage ~/.gitmessage
git config --global commit.template ~/.gitmessage
```

템플릿을 설정한 후 `git commit` 명령어 실행 시 자동으로 템플릿이 열립니다.

자세한 내용은 `.github/COMMIT_TEMPLATE.md` 파일을 참고하세요.

<!-- ============================================ -->
<!-- PR 리뷰 가이드라인 -->
<!-- ============================================ -->

## 👀 PR 리뷰 가이드라인

### 리뷰어 지정

- **필수 리뷰어**: 최소 1명 이상 지정
- **관련 팀원**: 변경사항과 관련된 팀원에게 리뷰 요청
- **도메인 전문가**: 해당 기능의 도메인 전문가에게 리뷰 요청

### 리뷰 시 확인 사항

#### 코드 품질

- 코드가 프로젝트의 코딩 컨벤션을 따르는가?
- 불필요한 코드나 주석이 없는가?
- 에러 처리가 적절한가?

#### 기능성

- 요구사항을 충족하는가?
- 엣지 케이스가 처리되었는가?
- 성능 이슈가 없는가?

#### 테스트

- 테스트가 충분한가?
- 테스트가 의미있는가?
- 테스트가 통과하는가?

#### 문서화

- 복잡한 로직에 주석이 있는가?
- API 변경사항이 문서화되었는가?
- README가 업데이트되었는가?

### 리뷰 코멘트 작성 가이드

- **건설적 피드백**: 문제점만 지적하지 말고 개선 방안 제시
- **명확한 설명**: 왜 그렇게 생각하는지 이유 설명
- **긍정적 톤**: 비판적이지 않고 협력적인 톤 유지
- **코드 예시**: 가능하면 개선된 코드 예시 제공

<!-- ============================================ -->
<!-- PR 병합 규칙 -->
<!-- ============================================ -->

## 🔀 PR 병합 규칙

### 병합 전 확인

- [ ] 모든 리뷰 코멘트가 해결되었습니다
- [ ] CI/CD 파이프라인이 통과했습니다
- [ ] 충돌이 해결되었습니다
- [ ] 브랜치가 최신 `develop`과 동기화되었습니다

### 병합 방법

#### 1. Squash and Merge (권장)

- 여러 커밋을 하나로 합쳐서 병합
- 깔끔한 히스토리 유지
- Feature 브랜치에 적합

#### 2. Merge Commit

- 모든 커밋 히스토리 보존
- 상세한 변경 이력 필요 시 사용
- Release, Hotfix 브랜치에 적합

#### 3. Rebase and Merge

- 선형 히스토리 유지
- 팀 정책에 따라 사용

### 병합 후 작업

- [ ] 브랜치 삭제 (일반적으로 자동 삭제)
- [ ] 관련 이슈 닫기
- [ ] 배포 (필요한 경우)

<!-- ============================================ -->
<!-- AI 어시스턴트 지침 -->
<!-- ============================================ -->

## 🤖 AI 어시스턴트 지침

### PR 생성 시

- Git Flow 브랜치 전략을 따릅니다
- 브랜치 타입(`feature`, `bugfix`, `hotfix` 등)을 올바르게 식별합니다
- PR 제목은 `[타입] 설명` 형식을 따릅니다
- PR 본문 템플릿을 사용하여 구조화된 설명을 작성합니다
- 변경사항을 명확하고 구체적으로 설명합니다

### 커밋 메시지 작성 시

- Conventional Commits 형식을 따릅니다
- 커밋 타입을 올바르게 선택합니다
- 제목은 50자 이내로 간결하게 작성합니다
- 본문에는 "무엇을"과 "왜"를 설명합니다

### 브랜치 생성 시

- 올바른 베이스 브랜치에서 분기합니다
  - Feature/Bugfix: `develop`에서 분기
  - Hotfix: `main`에서 분기
  - Release: `develop`에서 분기
- 브랜치 네이밍 규칙을 따릅니다
- 브랜치명은 소문자와 하이픈을 사용합니다

### 코드 리뷰 준비 시

- PR 생성 전 체크리스트를 확인합니다
- 관련 테스트가 포함되었는지 확인합니다
- 문서화가 필요한 변경사항인지 확인합니다
- 불필요한 변경사항이 포함되지 않았는지 확인합니다

<!-- ============================================ -->
<!-- 예외 상황 처리 -->
<!-- ============================================ -->

## ⚠️ 예외 상황 처리

### 긴급 수정 (Hotfix)

- `main` 브랜치에서 직접 `hotfix/*` 브랜치 생성
- 빠른 리뷰 및 병합 프로세스
- `main`과 `develop` 양쪽으로 병합 필수

### 큰 기능 개발

- 여러 PR로 나누어 단계적으로 병합
- Feature 브랜치를 오래 유지하지 않도록 주의
- 정기적으로 `develop`과 동기화

### 충돌 해결

- PR 생성 전에 `develop`과 동기화
- 충돌 발생 시 작성자가 해결
- 리뷰어는 충돌 해결 내용도 확인

<!-- ============================================ -->
<!-- 참고 자료 -->
<!-- ============================================ -->

## 📚 참고 자료

- [Git Flow 공식 문서](https://nvie.com/posts/a-successful-git-branching-model/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [GitHub PR 템플릿 가이드](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests)
